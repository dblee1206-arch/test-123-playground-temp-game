<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>TEXT GAME</title>

<style>
body {
  margin: 0;
  background: black;
  color: white;
  font-family: monospace;
  overflow: hidden;
}

#game {
  padding: 20px;
  min-height: 70vh;
}

#inputBox {
  position: fixed;
  bottom: 0;
  width: 100%;
  background: #000;
  border-top: 1px solid #333;
  display: flex;
}

#command {
  flex: 1;
  padding: 15px;
  font-size: 16px;
  background: black;
  color: white;
  border: none;
  outline: none;
}

#send {
  width: 60px;
  background: #111;
  color: white;
  border: none;
}

#gameOverVideo {
  display: none;
  position: fixed;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  z-index: 10;
}

/* 화면 흔들림 */
.shake {
  animation: shake 0.5s infinite;
}

@keyframes shake {
  0% { transform: translate(0,0); }
  25% { transform: translate(-5px, 5px); }
  50% { transform: translate(5px, -5px); }
  75% { transform: translate(-5px, -5px); }
  100% { transform: translate(0,0); }
}
</style>
</head>

<body>

<video id="gameOverVideo" src="gameover.mp4"></video>

<div id="game"></div>

<div id="inputBox">
  <input id="command" placeholder="행동을 입력하세요">
  <button id="send">▶</button>
</div>

<script>
const game = document.getElementById("game");
const input = document.getElementById("command");
const video = document.getElementById("gameOverVideo");

const responses = {
  "눈을 뜬다": "눈을 떴지만 아무것도 보이지 않는다.",
  "눈을 깜빡인다": "아무 일도 일어나지 않는다.",
  "손을 움직인다": "손가락을 쥐었다 폈다.",
  "발을 움직인다": "무언가에 구속되어 있는 듯하다.",
  "심장을 확인한다": "심장이 뛰고 있다.",
  "소리를 친다": "당신은 큰소리로 외쳤다..."
};

function typeText(text) {
  let i = 0;
  const line = document.createElement("div");
  game.appendChild(line);

  const typing = setInterval(() => {
    line.textContent += text[i];
    i++;
    if (i >= text.length) clearInterval(typing);
  }, 40);
}

function triggerGameOver() {
  document.body.classList.add("shake");
  video.style.display = "block";
  video.currentTime = 0;
  video.play();

  video.onended = () => {
    document.body.classList.remove("shake");
  };
}

function handleCommand() {
  const cmd = input.value.trim();
  input.value = "";

  if (!cmd) return;

  typeText("> " + cmd);

  setTimeout(() => {
    if (cmd === "도움을 요청한다" || cmd === "소리를 친다") {
      typeText("문이 열리며 낮은 목소리가 들린다.");
      triggerGameOver();
      return;
    }

    if (responses[cmd]) {
      typeText(responses[cmd]);
    } else {
      typeText("아무 일도 일어나지 않는다.");
    }
  }, 500);
}

document.getElementById("send").onclick = handleCommand;
input.addEventListener("keydown", e => {
  if (e.key === "Enter") handleCommand();
});

// 시작 문장
typeText("아무것도 보이지 않는다.");
</script>

</body>
</html>
